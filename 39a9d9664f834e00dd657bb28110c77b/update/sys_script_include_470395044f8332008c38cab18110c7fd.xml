<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>package_private</access>
        <active>true</active>
        <api_name>x_pd_integration.PagerDutyInboundFieldRuleClient</api_name>
        <client_callable>true</client_callable>
        <description>/*** Changes made to this script are not supported by PagerDuty ***/&#13;
PagerDuty Inbound field rule client methods to support 'Test Set From PagerDuty Wehbook Payload' button on the Inbound Field Rule table  to test the PagerDuty webhook payload field and custom lookup script (if defined). </description>
        <name>PagerDutyInboundFieldRuleClient</name>
        <script>/*** Changes made to this script are not supported by PagerDuty ***/
var PagerDutyInboundFieldRuleClient = Class.create();
PagerDutyInboundFieldRuleClient.prototype = Object.extendsObject(global.AbstractAjaxProcessor, {
  getValueFromPayload: function () {
    var payload = this.getParameter('sysparm_payload');
    var payloadField = this.getParameter('sysparm_payload_field');
    var targetField = this.getParameter('sysparm_target_field');
    var number = this.getParameter('sysparm_number');

    // Get the record based on entry number
    var grIFR = new GlideRecordSecure('x_pd_integration_pagerduty_inbound_field_rule');
    if (grIFR.get('number', number)) {
      var ifr = new PagerDutyInboundFieldRule();
      var results = ifr.getValueFromPayload(payload, payloadField, targetField, grIFR.getValue('run_lookup_script'), grIFR);

      var item = this.newItem('results');
      item.setAttribute('value', results.value);
      item.setAttribute('msg', results.msg);
    } else {
      var rtn = this.newItem('extractValue');
      rtn.setAttribute('msg', 'Rule not found');
    }
  },

  type: 'PagerDutyInboundFieldRuleClient'
});
</script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>PagerDuty_v8.0</sys_created_by>
        <sys_created_on>2017-05-25 15:30:21</sys_created_on>
        <sys_id>470395044f8332008c38cab18110c7fd</sys_id>
        <sys_mod_count>12</sys_mod_count>
        <sys_name>PagerDutyInboundFieldRuleClient</sys_name>
        <sys_package display_value="PagerDuty Incident Resolution Platform" source="x_pd_integration">39a9d9664f834e00dd657bb28110c77b</sys_package>
        <sys_policy/>
        <sys_scope display_value="PagerDuty Incident Resolution Platform">39a9d9664f834e00dd657bb28110c77b</sys_scope>
        <sys_update_name>sys_script_include_470395044f8332008c38cab18110c7fd</sys_update_name>
        <sys_updated_by>PagerDuty_v8.0</sys_updated_by>
        <sys_updated_on>2019-06-03 11:09:46</sys_updated_on>
    </sys_script_include>
</record_update>
