<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_page">
    <sys_ui_page action="INSERT_OR_UPDATE">
        <category>general</category>
        <client_script><![CDATA[/* jshint esnext: true */

jQuery(function () {
  var $ = jQuery;
  var modal = GlideModal.get();
  var snIncidentId = modal.getPreference('snIncidentId');
  var loading = false;

  var trackingApi = x_pd_integration.AjaxHelper.ajaxClientFor('TrackingController');

  var configurator = new x_pd_integration.ConferenceBridgeConfigurator({
    element: document.getElementById('config-bridge-configuration-injection-point'),
    snIncidentId: snIncidentId,
  });

  configurator.onError = function (error) {
    jslog(error.stack);
    var message = error.message || 'Unknown error. Details: ' + JSON.stringify(error);
    g_form.addErrorMessage(message);
  };

  $('.pd-confdialog-form button.submit-request').on('click', function (event) {
    event.preventDefault();
    event.stopPropagation();
    if (loading) {
      return;
    }
    trackingApi.track('add_conf_bridge_dialog_clicked_submit_button', {}, function (error, _result) {
      if (error) {
        jslog('Tracking error: ' + error);
      }
    });
    loading = true;
    configurator.submitRequest(function (e) {
      if (e) {
        jslog(e.stack);
        var message = e.message || 'Unknown error. Details: ' + JSON.stringify(e);
        g_form.addErrorMessage(message);
      } else {
        g_form.addInfoMessage('Conference bridge successfully updated');
      }
      modal.destroy();
    });
    $('.pd-confdialog-form button.submit-request').attr('disabled', true);
  });

  $('.pd-confdialog-form button.submit-cancel').on('click', function (event) {
    event.preventDefault();
    event.stopPropagation();
    trackingApi.track(
      'add_conf_bridge_dialog_clicked_cancel_button', {},
      function (error, _result) {
        if (error) {
          jslog('Tracking error: ' + error);
        }
      }
    );
    modal.destroy();
  });
});


]]></client_script>
        <description/>
        <direct>false</direct>
        <endpoint>x_pd_integration_add_conf_bridge_dialog.do</endpoint>
        <html><![CDATA[<?xml version="1.0" encoding="utf-8" ?>
<j:jelly trim="false" xmlns:j="jelly:core" xmlns:g="glide" xmlns:j2="null" xmlns:g2="null">
<g:evaluate var="jvar_stamp" expression="new Date().getTime()" />
<script language="javascript" src="x_pd_integration.AjaxHelper.jsdbx?v=${HTML:jvar_stamp}"></script>
<script language="javascript" src="x_pd_integration.ConferenceBridgeConfigu.jsdbx?v=${HTML:jvar_stamp}"></script>

<g:evaluate>
  var pdLogo = gs.getProperty('x_pd_integration.pd_logo');
</g:evaluate>

<form class="form_body form-horizontal pd-confdialog-form">
  <style>
    .form_body {
      background-color: #fff;
    }

    .pd-confdialog-form {
      margin: 1rem;
    }
  </style>
  <div class="row">
    <div class="col-sm-12" style="font-size: medium; height: 5rem">
      Select Conference Bridge
    </div>
  </div>
  <div id="config-bridge-configuration-injection-point"></div>

  <div class="row" style="margin-top: 2rem">
    <div class="col-sm-12">
      <div class="pull-left" style="padding: 6px 9px;">
        <img width="120" alt="PagerDuty Logo" src="${HTML:pdLogo}" />
      </div>
      <div class="pull-right">
        <button class="btn btn-default submit-cancel" style="margin-right: 1rem">Cancel</button>
        <button class="btn btn-primary submit-request">Add Conference Bridge</button>
      </div>
    </div>
  </div>
</form>
</j:jelly>
]]></html>
        <name>add_conf_bridge_dialog</name>
        <processing_script/>
        <sys_class_name>sys_ui_page</sys_class_name>
        <sys_created_by>PagerDuty_v8.0</sys_created_by>
        <sys_created_on>2019-04-12 09:36:15</sys_created_on>
        <sys_id>07c146c5db703300eb140181ca9619ac</sys_id>
        <sys_mod_count>30</sys_mod_count>
        <sys_name>add_conf_bridge_dialog</sys_name>
        <sys_package display_value="PagerDuty Incident Resolution Platform" source="x_pd_integration">39a9d9664f834e00dd657bb28110c77b</sys_package>
        <sys_policy/>
        <sys_scope display_value="PagerDuty Incident Resolution Platform">39a9d9664f834e00dd657bb28110c77b</sys_scope>
        <sys_update_name>sys_ui_page_07c146c5db703300eb140181ca9619ac</sys_update_name>
        <sys_updated_by>PagerDuty_v8.0</sys_updated_by>
        <sys_updated_on>2023-09-29 14:15:57</sys_updated_on>
    </sys_ui_page>
</record_update>
