<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_page">
    <sys_ui_page action="INSERT_OR_UPDATE">
        <category>general</category>
        <client_script>jQuery(function () {
  var $ = jQuery;
  var modal = GlideModal.get();
  var snCustomFieldMappingId = modal.getPreference('snCustomFieldMappingId');
  var api = x_pd_integration.AjaxHelper.ajaxClientFor('PagerDutyCustomFieldsController');
  // Button deleted clicked open dialog
  trackEvent('custom_fields_mapping_detail_delete_click_button');

  api.getCustomFieldMapping(
    snCustomFieldMappingId, {},
    function (error, mapping) {
      if (error || !mapping) {
        $('#loader').hide();
        $('#error').show();
      } else {
        $('#mapping-sn-field-name').text(' ServiceNow "' + mapping.snFieldDisplayName + '" ');
        $('#sysparm_sys_id').val(mapping.sysId);
        $('#loader').hide();
        $('#content').show();
      }
    }
  );

  $('.pd-delete-mapping-form button.submit-request').on('click', function (event) {
    $('form')[0].submit();
    trackEvent('custom_fields_mapping_detail_dialog_confirm_delete_click_button');
  });

  $('.pd-delete-mapping-form button.submit-cancel').on('click', function (event) {
    event.preventDefault();
    event.stopPropagation();
    modal.destroy();
  });

  function trackEvent (event) {
    var trackingApi = x_pd_integration.AjaxHelper.ajaxClientFor('TrackingController');
    trackingApi.track(event, {}, function (error, _result) {
      if (error) {
        jslog('Tracking error: ' + error);
      }
    });
  }
});
</client_script>
        <description>Custom Field Mapping delete confirmation dialog</description>
        <direct>false</direct>
        <endpoint>x_pd_integration_custom_field_mapping_delete_dialog.do</endpoint>
        <html>&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;j:jelly trim="false" xmlns:j="jelly:core" xmlns:g="glide" xmlns:j2="null" xmlns:g2="null"&gt;
	&lt;g:evaluate var="jvar_stamp" expression="new Date().getTime()" /&gt;
	&lt;script language="javascript" src="x_pd_integration.AjaxHelper.jsdbx?v=${HTML:jvar_stamp}"&gt;&lt;/script&gt;

	&lt;style&gt;
		.pd-delete-mapping-form {
			margin: 1rem;
		}

		.form_body {
			background-color: #fff;
		}

		.notification {
			padding: 16px;
		}

		.notification-content {
			display: flex;
			gap: 8px;
		}

		.notification-error .notification-icon {
			width: 21px;
			height: 21px;
			background-image: url('data:image/svg+xml;utf8,&lt;svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21" fill="%23161B1C" &gt; &lt;path fill-rule="evenodd" clip-rule="evenodd" d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z" /&gt; &lt;path fill-rule="evenodd" clip-rule="evenodd" d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z" /&gt; &lt;/svg&gt; ');
		}
	&lt;/style&gt;
	&lt;div class="form_body form-horizontal pd-delete-mapping-form"&gt;
		&lt;div id="loader" class="loader"&gt;
			&lt;span class="icon icon-loading"&gt;&lt;/span&gt;
		&lt;/div&gt;
		&lt;div id="error" style="display: none;"&gt;
			&lt;div class="notification notification-error"&gt;
				&lt;div class="notification-content"&gt;
					&lt;div class="notification-icon"&gt;&lt;/div&gt;
					&lt;div&gt;
						&lt;p&gt;&lt;b id="error-title"&gt;There was an error loading the field mapping.&lt;/b&gt;&lt;/p&gt;
						&lt;p id="error-message"&gt;Unexpected error.&lt;/p&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		&lt;div id="content" style="display: none;"&gt;
			&lt;div class="row"&gt;
				&lt;div class="col-sm-12"&gt;
					&lt;div class="form-group"&gt;
						&lt;div&gt;
							&lt;label style="padding: 0.75rem 0;"&gt;
								&lt;span class="label-text"&gt;Are you sure you want to delete the &lt;b&gt;&lt;span id="mapping-sn-field-name"&gt;&lt;/span&gt;&lt;/b&gt; field mapping?&lt;/span&gt;
							&lt;/label&gt;
						&lt;/div&gt;
					&lt;/div&gt;
					&lt;div class="form-group"&gt;
						&lt;div&gt;
							&lt;label style="padding: 0.75rem 0;"&gt;
								&lt;ul&gt;
									&lt;li&gt;This will delete the mapping and bidirectional sync between the ServiceNow field and PagerDuty. This
										action cannot be undone.&lt;/li&gt;
									&lt;li&gt;This will not affect any value already set on existing PagerDuty Incidents or ServiceNow Incidents.
									&lt;/li&gt;
									&lt;li&gt;This will not delete the actual fields. The PagerDuty Custom Field mapped to this ServiceNow field
										will still persist in PagerDuty. Go to PagerDuty to manage this field.&lt;/li&gt;
								&lt;/ul&gt;
							&lt;/label&gt;
						&lt;/div&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
			&lt;div class="row" style="margin-top: 2rem"&gt;
				&lt;div class="col-sm-12"&gt;
					&lt;div class="pull-right"&gt;
						&lt;g:ui_form&gt;
							&lt;input type="hidden" id="sysparm_sys_id" name="sysparm_sys_id"/&gt;
							&lt;button class="btn btn-default submit-cancel" style="margin-right: 1rem"&gt;Cancel&lt;/button&gt;
							&lt;button class="btn btn-primary submit-request"&gt;Delete&lt;/button&gt;
						&lt;/g:ui_form&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
&lt;/j:jelly&gt;</html>
        <name>custom_field_mapping_delete_dialog</name>
        <processing_script>(function () {
  try {
    gs.debug('Deleting custom field mapping: ' + this['sysparm_sys_id']);
    var customFieldsSupport = new x_pd_integration.PagerDutyCustomFieldsSupport();
    customFieldsSupport.deleteMapping(this['sysparm_sys_id']);
    gs.addInfoMessage('Custom field mapping successfully deleted.');
    response.sendRedirect('x_pd_integration_custom_field_mapping_list.do');
  } catch (e) {
    gs.error('Error deleting custom field mapping: ' + e.message);
    gs.addErrorMessage('Error deleting custom field mapping: ' + e.message);
    response.sendRedirect(gs.getSession().getUrlOnStack());
  }
})();
</processing_script>
        <sys_class_name>sys_ui_page</sys_class_name>
        <sys_created_by>PagerDuty_v8.0</sys_created_by>
        <sys_created_on>2023-10-23 15:31:25</sys_created_on>
        <sys_id>85a05239474a7110607b7258946d43a3</sys_id>
        <sys_mod_count>29</sys_mod_count>
        <sys_name>custom_field_mapping_delete_dialog</sys_name>
        <sys_package display_value="PagerDuty Incident Resolution Platform" source="x_pd_integration">39a9d9664f834e00dd657bb28110c77b</sys_package>
        <sys_policy/>
        <sys_scope display_value="PagerDuty Incident Resolution Platform">39a9d9664f834e00dd657bb28110c77b</sys_scope>
        <sys_update_name>sys_ui_page_85a05239474a7110607b7258946d43a3</sys_update_name>
        <sys_updated_by>PagerDuty_v8.0</sys_updated_by>
        <sys_updated_on>2023-10-23 16:47:52</sys_updated_on>
    </sys_ui_page>
</record_update>
