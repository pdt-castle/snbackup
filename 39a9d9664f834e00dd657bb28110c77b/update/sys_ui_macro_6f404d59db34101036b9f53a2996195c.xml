<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_macro">
    <sys_ui_macro action="INSERT_OR_UPDATE">
        <active>true</active>
        <category>general</category>
        <description>A modal which allows a user to choose one of Escalation Policies / Services from a ServiceNow table:&#13;
[x_pd_integration_escalation_policies] / [x_pd_integration_services].</description>
        <media_type/>
        <name>select_pagerduty_object</name>
        <scoped_name>x_pd_integration_select_pagerduty_object</scoped_name>
        <sys_class_name>sys_ui_macro</sys_class_name>
        <sys_created_by>PagerDuty_v8.0</sys_created_by>
        <sys_created_on>2020-05-14 15:51:03</sys_created_on>
        <sys_id>6f404d59db34101036b9f53a2996195c</sys_id>
        <sys_mod_count>228</sys_mod_count>
        <sys_name>select_pagerduty_object</sys_name>
        <sys_package display_value="PagerDuty Incident Resolution Platform" source="x_pd_integration">39a9d9664f834e00dd657bb28110c77b</sys_package>
        <sys_policy/>
        <sys_scope display_value="PagerDuty Incident Resolution Platform">39a9d9664f834e00dd657bb28110c77b</sys_scope>
        <sys_update_name>sys_ui_macro_6f404d59db34101036b9f53a2996195c</sys_update_name>
        <sys_updated_by>PagerDuty_v8.0</sys_updated_by>
        <sys_updated_on>2020-07-15 11:27:03</sys_updated_on>
        <xml><![CDATA[<?xml version="1.0" encoding="utf-8" ?>
<j:jelly trim="false" xmlns:j="jelly:core" xmlns:g="glide" xmlns:j2="null" xmlns:g2="null">

  <g:evaluate var="jvar_guid" expression="gs.generateGUID(this);" />
  <j:set var="jvar_n" value="show_pagerduty_${HTML:jvar_guid}:${HTML:ref}"/>
  <j:set var="jvar_input_id" value="${HTML:ref}"/>

  <j:if test="${HTML:jvar_ref_table == 'sys_user_group'}">
    <j:if test="${HTML:jvar_element == 'x_pd_integration_pagerduty_service'}">
      <j:set var="jvar_feature" value="services"/>
    </j:if>
    <j:if test="${HTML:jvar_element == 'x_pd_integration_pagerduty_escalation'}">
      <j:set var="jvar_feature" value="escalation_policies"/>
    </j:if>
  </j:if>
  <j:if test="${HTML:jvar_ref_table.startsWith('cmdb_ci')}">
    <j:if test="${HTML:jvar_element == 'x_pd_integration_pagerduty_service'}">
      <j:set var="jvar_feature" value="services"/>
    </j:if>
  </j:if>

  <j:if test="${HTML:jvar_feature == 'escalation_policies'}">
    <j:set var="jvar_feature_name" value="an escalation policy"/>
    <j:set var="jvar_src_table" value="x_pd_integration_escalation_policies"/>
    <j:set var="jvar_spoof_ref" value="${HTML:jvar_src_table}.escalation_policy_id_ref"/>
  </j:if>
  <j:if test="${HTML:jvar_feature == 'services'}">
    <j:set var="jvar_feature_name" value="a service"/>
    <j:set var="jvar_src_table" value="x_pd_integration_services"/>
    <j:set var="jvar_spoof_ref" value="${HTML:jvar_src_table}.service_id_ref"/>
  </j:if>

  <j:if test="${HTML:jvar_feature == 'escalation_policies'}">
    <a>
      <span>
        <input type="hidden" id="${HTML:jvar_spoof_ref}"></input>
        <input type="hidden" id="sys_display.${HTML:jvar_spoof_ref}"
          data-completer="AJAXTableCompleter" data-ref="${HTML:jvar_spoof_ref}" data-table="${HTML:jvar_src_table}"
        ></input>
        <script>
          (function() {
            var epInput = document.getElementById('${HTML:jvar_ref_table}.${HTML:jvar_element}');
            var pdInput = document.getElementById('${HTML:jvar_spoof_ref}');
            pdInput.onchange = function() { epInput.value = pdInput.value };
          })();
        </script>
        <span>
          <button id="lookup.${HTML:jvar_spoof_ref}" name="lookup.${HTML:jvar_spoof_ref}"
            aria-haspopup="true" aria-label="Look up value for field: ${HTML:jvar_spoof_ref}"
            class="btn btn-default" data-for="sys_display.${HTML:jvar_spoof_ref}"
            data-type="ac_reference_input" data-original-title="Lookup using list"
            role="button" tabindex="-1" title="" type="button"
          >
            <span class="icon icon-search" aria-hidden="true"></span>
          </button>
        </span>
      </span>
    </a>
  </j:if>

  <j:if test="${HTML:jvar_feature == 'services'}">
    <a>
      <span>
        <input type="hidden" id="${HTML:jvar_spoof_ref}"></input>
        <input type="hidden" id="sys_display.${HTML:jvar_spoof_ref}"
          data-completer="AJAXTableCompleter" data-ref="${HTML:jvar_spoof_ref}" data-table="${HTML:jvar_src_table}"
        ></input>
        <script>
          (function() {
            var epInput = document.getElementById('${HTML:jvar_ref_table}.${HTML:jvar_element}');
            var pdInput = document.getElementById('${HTML:jvar_spoof_ref}');
            pdInput.onchange = function() { epInput.value = pdInput.value };
          })();
        </script>
        <span>
          <button id="lookup.${HTML:jvar_spoof_ref}" name="lookup.${HTML:jvar_spoof_ref}"
            aria-haspopup="true" aria-label="Look up value for field: ${HTML:jvar_spoof_ref}"
            class="btn btn-default" data-for="sys_display.${HTML:jvar_spoof_ref}"
            data-type="ac_reference_input" data-original-title="Lookup using list"
            role="button" tabindex="-1" title="" type="button"
          >
            <span class="icon icon-search" aria-hidden="true"></span>
          </button>
        </span>
      </span>
    </a>
  </j:if>

</j:jelly>
]]></xml>
    </sys_ui_macro>
</record_update>
